{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/sunshine-aio/library/schemas/tool-entry.json",
  "title": "Sunshine-AIO Tool Entry",
  "description": "Schema for a tool entry in the Sunshine-AIO community library",
  "type": "object",
  "required": [
    "name",
    "repository",
    "slug",
    "compatibility",
    "installation",
    "uninstallation",
    "configuration"
  ],
  "anyOf": [
    {
      "required": ["description", "category", "license"]
    },
    {
      "required": ["short-description"]
    }
  ],
  "properties": {
    "name": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9\\s\\-_]+$",
      "minLength": 2,
      "maxLength": 50,
      "description": "Tool name (alphanumeric, spaces, hyphens, underscores allowed)"
    },
    "description": {
      "type": "string",
      "minLength": 10,
      "maxLength": 150,
      "description": "Brief description of what the tool does"
    },
    "category": {
      "type": "string",
      "enum": [
        "streaming/hosts",
        "streaming/clients",
        "capture/recording",
        "display/virtual",
        "audio/routing",
        "input/controllers",
        "network/optimization",
        "monitoring/performance",
        "encoding/optimization",
        "analytics/streaming",
        "hardware/utilities"
      ],
      "description": "Tool category from predefined list"
    },
    "subcategory": {
      "type": "string",
      "maxLength": 30,
      "description": "Optional subcategory for more specific classification"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^[a-z0-9-]+$",
        "maxLength": 20
      },
      "maxItems": 8,
      "uniqueItems": true,
      "description": "Tags for better searchability"
    },
    "repository": {
      "type": "string",
      "format": "uri",
      "pattern": "^https://github\\.com/[^/]+/[^/]+/?$",
      "description": "GitHub repository URL"
    },
    "documentation": {
      "type": "string",
      "format": "uri",
      "description": "Link to documentation"
    },
    "license": {
      "type": "string",
      "enum": [
        "MIT",
        "Apache-2.0", 
        "GPL-3.0",
        "BSD-3-Clause",
        "ISC",
        "LGPL-3.0",
        "MPL-2.0",
        "Unlicense"
      ],
      "description": "Open source license"
    },
    "platforms": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["Windows", "Linux", "macOS", "Web", "Cross-platform"]
      },
      "minItems": 1,
      "uniqueItems": true,
      "description": "Supported platforms"
    },
    "language": {
      "type": "string",
      "enum": [
        "Python", "JavaScript", "TypeScript", "Go", "Rust", 
        "Java", "C++", "C#", "PHP", "Ruby", "Shell", "Other"
      ],
      "description": "Primary programming language"
    },
    "maintainer": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "maxLength": 50,
          "description": "Maintainer name"
        },
        "contact": {
          "type": "string",
          "format": "email",
          "description": "Contact email"
        },
        "github": {
          "type": "string",
          "pattern": "^[a-zA-Z0-9-]+$",
          "description": "GitHub username"
        }
      },
      "required": ["name"],
      "description": "Tool maintainer information"
    },
    "metrics": {
      "type": "object",
      "properties": {
        "stars": {
          "type": "integer",
          "minimum": 0,
          "description": "GitHub stars count"
        },
        "forks": {
          "type": "integer", 
          "minimum": 0,
          "description": "GitHub forks count"
        },
        "last_commit": {
          "type": "string",
          "format": "date",
          "description": "Date of last commit"
        }
      },
      "description": "Automatically collected metrics"
    },
    "verification": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "enum": ["pending", "verified", "failed", "deprecated"],
          "default": "pending",
          "description": "Verification status"
        },
        "date": {
          "type": "string",
          "format": "date-time",
          "description": "Last verification date"
        },
        "method": {
          "type": "string",
          "enum": ["automated", "manual", "community"],
          "description": "Verification method"
        },
        "score": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Quality score (0-100)"
        }
      },
      "description": "Verification and quality information"
    },
    "validation": {
      "type": "object",
      "properties": {
        "checksum_required": {
          "type": "boolean",
          "default": false,
          "description": "Whether checksum verification is required for this tool"
        },
        "signature_verification": {
          "type": "boolean",
          "default": false,
          "description": "Whether digital signature verification is required"
        },
        "trust_level": {
          "type": "string",
          "enum": ["unverified", "community_verified", "maintainer_verified", "official"],
          "default": "unverified",
          "description": "Trust level for this tool"
        },
        "auto_update": {
          "type": "boolean",
          "default": true,
          "description": "Whether this tool supports automatic updates"
        }
      },
      "description": "Validation and security configuration"
    },
    "added_date": {
      "type": "string",
      "format": "date",
      "description": "Date when tool was added to registry"
    },
    "contributed_by": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9-]+$",
      "description": "GitHub username of contributor"
    },
    "slug": {
      "type": "string",
      "pattern": "^[a-z0-9-]+$",
      "minLength": 2,
      "maxLength": 50,
      "description": "Unique identifier for the tool (lowercase, hyphens only)"
    },
    "short-description": {
      "type": "string",
      "minLength": 10,
      "maxLength": 100,
      "description": "Brief description for display purposes (with hyphens)"
    },
    "short_description": {
      "type": "string",
      "minLength": 10,
      "maxLength": 100,
      "description": "Brief description for display purposes (alternative to description)"
    },
    "long-description": {
      "type": "string",
      "maxLength": 500,
      "description": "Detailed description of the tool features and purpose (with hyphens)"
    },
    "long_description": {
      "type": "string",
      "maxLength": 500,
      "description": "Detailed description of the tool features and purpose"
    },
    "author": {
      "type": "string",
      "maxLength": 100,
      "description": "Tool author or organization name"
    },
    "website": {
      "type": "string",
      "format": "uri",
      "description": "Official website URL"
    },
    "compatibility": {
      "type": "object",
      "properties": {
        "sunshine": {
          "type": "boolean",
          "description": "Compatible with Sunshine streaming host"
        },
        "apollo": {
          "type": "boolean",
          "description": "Compatible with Apollo streaming host"
        },
        "platforms": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["windows", "linux", "macos", "web"]
          },
          "minItems": 1,
          "uniqueItems": true,
          "description": "Supported operating systems (lowercase)"
        }
      },
      "required": ["sunshine", "apollo", "platforms"],
      "description": "Compatibility information for streaming hosts and platforms"
    },
    "installation": {
      "type": "object",
      "oneOf": [
        {
          "title": "Single platform installation",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["executable", "zip", "script", "msi", "portable", "package-manager"],
              "description": "Installation method type"
            },
            "url": {
              "type": "string",
              "format": "uri",
              "description": "Direct download URL (optional, defaults to latest GitHub release)"
            },
            "executable": {
              "type": "string",
              "description": "Specific executable or package name"
            },
            "args": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Command line arguments for installation"
            },
            "postInstall": {
              "type": "string",
              "description": "Relative path to post-installation script"
            },
            "checksum": {
              "type": "string",
              "pattern": "^(|sha256:[a-fA-F0-9]+|md5:[a-fA-F0-9]+|sha1:[a-fA-F0-9]+)$",
              "description": "File checksum for integrity verification (empty string allowed)"
            },
            "silent": {
              "type": "boolean",
              "default": true,
              "description": "Whether installation should run silently"
            }
          },
          "required": ["type"],
          "additionalProperties": false
        },
        {
          "title": "Multi-platform installation",
          "properties": {
            "platforms": {
              "type": "object",
              "properties": {
                "windows": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": ["executable", "zip", "script", "msi", "portable", "package-manager"],
                      "description": "Installation method type"
                    },
                    "url": {
                      "type": "string",
                      "format": "uri",
                      "description": "Direct download URL for Windows"
                    },
                    "download_strategy": {
                      "type": "string",
                      "enum": ["direct_url", "github_releases", "github_latest", "package_manager"],
                      "default": "github_releases",
                      "description": "Strategy for downloading the installer"
                    },
                    "file_pattern": {
                      "type": "string",
                      "description": "Pattern to match release files (e.g., '*.exe', '*Setup.msi')"
                    },
                    "executable": {
                      "type": "string",
                      "description": "Windows executable name (e.g., Test.exe, Test.msi)"
                    },
                    "args": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "Windows-specific command line arguments"
                    },
                    "install_flags": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "Silent installation flags (e.g., ['/S', '/SILENT', '/VERYSILENT'])"
                    },
                    "install_dir_flag": {
                      "type": "string",
                      "description": "Flag to specify installation directory (e.g., '/DIR=')"
                    },
                    "requires_admin": {
                      "type": "boolean",
                      "default": false,
                      "description": "Whether installation requires administrator privileges"
                    },
                    "postInstall": {
                      "type": "string",
                      "description": "Windows post-installation script path"
                    },
                    "checksum": {
                      "type": "string",
                      "pattern": "^(|sha256:[a-fA-F0-9]+|md5:[a-fA-F0-9]+|sha1:[a-fA-F0-9]+)$",
                      "description": "Windows file checksum"
                    },
                    "checksum_verification": {
                      "type": "boolean",
                      "default": true,
                      "description": "Whether to verify file integrity using checksum"
                    },
                    "silent": {
                      "type": "boolean",
                      "default": true,
                      "description": "Silent installation for Windows"
                    }
                  },
                  "required": ["type"],
                  "additionalProperties": false
                },
                "linux": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": ["executable", "zip", "script", "deb", "rpm", "appimage", "portable", "package-manager"],
                      "description": "Installation method type"
                    },
                    "url": {
                      "type": "string",
                      "format": "uri",
                      "description": "Direct download URL for Linux"
                    },
                    "download_strategy": {
                      "type": "string",
                      "enum": ["direct_url", "github_releases", "github_latest", "package_manager"],
                      "default": "github_releases",
                      "description": "Strategy for downloading the installer"
                    },
                    "file_pattern": {
                      "type": "string",
                      "description": "Pattern to match release files (e.g., '*.AppImage', '*.deb', '*.tar.gz')"
                    },
                    "executable": {
                      "type": "string",
                      "description": "Linux executable name (e.g., Test.deb, Test.AppImage, Test.tar.gz)"
                    },
                    "args": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "Linux-specific command line arguments"
                    },
                    "install_flags": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "Silent installation flags (e.g., ['-y', '--silent', '--force'])"
                    },
                    "requires_admin": {
                      "type": "boolean",
                      "default": false,
                      "description": "Whether installation requires sudo privileges"
                    },
                    "postInstall": {
                      "type": "string",
                      "description": "Linux post-installation script path"
                    },
                    "checksum": {
                      "type": "string",
                      "pattern": "^(|sha256:[a-fA-F0-9]+|md5:[a-fA-F0-9]+|sha1:[a-fA-F0-9]+)$",
                      "description": "Linux file checksum"
                    },
                    "checksum_verification": {
                      "type": "boolean",
                      "default": true,
                      "description": "Whether to verify file integrity using checksum"
                    },
                    "silent": {
                      "type": "boolean",
                      "default": true,
                      "description": "Silent installation for Linux"
                    }
                  },
                  "required": ["type"],
                  "additionalProperties": false
                },
                "macos": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": ["executable", "zip", "script", "dmg", "pkg", "app", "portable", "package-manager"],
                      "description": "Installation method type"
                    },
                    "url": {
                      "type": "string",
                      "format": "uri",
                      "description": "Direct download URL for macOS"
                    },
                    "download_strategy": {
                      "type": "string",
                      "enum": ["direct_url", "github_releases", "github_latest", "package_manager"],
                      "default": "github_releases",
                      "description": "Strategy for downloading the installer"
                    },
                    "file_pattern": {
                      "type": "string",
                      "description": "Pattern to match release files (e.g., '*.dmg', '*.pkg', '*.app')"
                    },
                    "executable": {
                      "type": "string",
                      "description": "macOS executable name (e.g., Test.dmg, Test.pkg, Test.app)"
                    },
                    "args": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "macOS-specific command line arguments"
                    },
                    "install_flags": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "Silent installation flags (e.g., ['-allowUntrusted', '--silent'])"
                    },
                    "requires_admin": {
                      "type": "boolean",
                      "default": false,
                      "description": "Whether installation requires administrator privileges"
                    },
                    "postInstall": {
                      "type": "string",
                      "description": "macOS post-installation script path"
                    },
                    "checksum": {
                      "type": "string",
                      "pattern": "^(|sha256:[a-fA-F0-9]+|md5:[a-fA-F0-9]+|sha1:[a-fA-F0-9]+)$",
                      "description": "macOS file checksum"
                    },
                    "checksum_verification": {
                      "type": "boolean",
                      "default": true,
                      "description": "Whether to verify file integrity using checksum"
                    },
                    "silent": {
                      "type": "boolean",
                      "default": true,
                      "description": "Silent installation for macOS"
                    }
                  },
                  "required": ["type"],
                  "additionalProperties": false
                }
              },
              "minProperties": 1,
              "additionalProperties": false,
              "description": "Platform-specific installation configurations"
            }
          },
          "required": ["platforms"],
          "additionalProperties": false
        }
      ],
      "description": "Installation configuration - supports both single platform and multi-platform setups"
    },
    "uninstallation": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["executable", "script", "registry", "manual"],
          "description": "Uninstallation method type"
        },
        "path": {
          "type": "string",
          "description": "Path to uninstaller executable or script"
        },
        "args": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Command line arguments for uninstallation"
        }
      },
      "required": ["type"],
      "description": "Uninstallation configuration"
    },
    "configuration": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["", "url", "file", "script", "registry", "none"],
          "description": "Configuration method type (empty string allowed)"
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "Configuration interface URL"
        },
        "file": {
          "type": "string",
          "description": "Configuration file path"
        },
        "script": {
          "type": "string",
          "description": "Configuration script path"
        }
      },
      "description": "Configuration options"
    },
    "screenshots": {
      "type": "array",
      "items": {
        "type": "string",
        "description": "Relative path to screenshot image"
      },
      "maxItems": 10,
      "description": "Screenshots of the tool interface"
    },
    "icon": {
      "type": "string",
      "description": "Relative path to tool icon image"
    }
  },
  "additionalProperties": false
}